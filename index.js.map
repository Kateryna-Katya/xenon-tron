{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["/**\n * XenonTron Project - Final Stable Script\n * Решена проблема с загрузкой секции Education\n */\n\nwindow.addEventListener('load', () => {\n    // 1. Инициализация иконок\n    lucide.createIcons();\n\n    // 2. Инициализация Lenis\n    const lenis = new Lenis({\n        duration: 1.2,\n        smoothWheel: true,\n        wheelMultiplier: 1,\n    });\n\n    // Связываем Lenis со ScrollTrigger\n    lenis.on('scroll', ScrollTrigger.update);\n\n    gsap.ticker.add((time) => {\n        lenis.raf(time * 1000);\n    });\n    gsap.ticker.lagSmoothing(0);\n\n    // 3. Регистрация плагина\n    gsap.registerPlugin(ScrollTrigger);\n\n    // --- ФУНКЦИЯ ИНИЦИАЛИЗАЦИИ АНИМАЦИЙ ---\n    const initAnimations = () => {\n        \n        // Hero\n        gsap.from('.hero__content > *', {\n            y: 40,\n            opacity: 0,\n            duration: 1,\n            stagger: 0.2,\n            ease: \"power4.out\"\n        });\n\n        // Исправленная секция Education\n        const eduCards = document.querySelectorAll('.edu-card');\n        eduCards.forEach((card) => {\n            // Устанавливаем начальное состояние через GSAP (важно!)\n            gsap.set(card, { autoAlpha: 0, y: 50 });\n\n            const tl = gsap.timeline({\n                scrollTrigger: {\n                    trigger: card,\n                    start: \"top 90%\", // Срабатывает чуть раньше для надежности\n                    toggleActions: \"play none none none\",\n                    // invalidateOnRefresh пересчитывает точки при изменении высоты\n                    invalidateOnRefresh: true, \n                }\n            });\n\n            tl.to(card, {\n                autoAlpha: 1, // Плавно включает visibility и opacity\n                y: 0,\n                duration: 0.8,\n                ease: \"power3.out\"\n            })\n            .from(card.querySelectorAll('.edu-list li'), {\n                x: -20,\n                opacity: 0,\n                stagger: 0.15,\n                duration: 0.5,\n                ease: \"power2.out\"\n            }, \"-=0.4\");\n        });\n\n        // Блог и другие секции\n        document.querySelectorAll('.blog-item').forEach((item) => {\n            gsap.from(item, {\n                scrollTrigger: {\n                    trigger: item,\n                    start: \"top 95%\",\n                },\n                y: 30,\n                opacity: 0,\n                duration: 0.8\n            });\n        });\n\n        // Инновации\n        gsap.from(\".innovations__viz\", {\n            scrollTrigger: {\n                trigger: \".innovations\",\n                start: \"top 80%\",\n            },\n            scale: 0.6,\n            opacity: 0,\n            duration: 1.2,\n            ease: \"back.out(1.7)\"\n        });\n    };\n\n    // --- 4. ЗАПУСК И ГАРАНТИЯ ПЕРЕСЧЕТА ---\n    \n    // Запускаем анимации\n    initAnimations();\n\n    // ПРИНУДИТЕЛЬНЫЙ ПЕРЕСЧЕТ (ТРИЖДЫ)\n    // 1. Сразу\n    ScrollTrigger.refresh();\n    \n    // 2. Через 500мс (когда Lenis \"утряс\" высоту)\n    setTimeout(() => {\n        ScrollTrigger.refresh();\n    }, 500);\n\n    // 3. Через 1.5 сек (на случай тяжелых картинок)\n    setTimeout(() => {\n        ScrollTrigger.refresh();\n    }, 1500);\n\n    // --- 5. ФОРМА ---\n    const contactForm = document.getElementById('ai-contact-form');\n    if (contactForm) {\n        const n1 = Math.floor(Math.random() * 8) + 1;\n        const n2 = Math.floor(Math.random() * 5) + 1;\n        const result = n1 + n2;\n        const label = document.getElementById('captcha-label');\n        if (label) label.textContent = `Сколько будет ${n1} + ${n2}?`;\n\n        contactForm.onsubmit = (e) => {\n            e.preventDefault();\n            if (parseInt(document.getElementById('captcha-input').value) !== result) {\n                alert('Неверный ответ!'); return;\n            }\n            const btn = contactForm.querySelector('button');\n            btn.disabled = true; btn.textContent = 'Отправка...';\n            setTimeout(() => {\n                const msg = document.getElementById('form-message');\n                msg.style.display = 'block';\n                msg.className = 'form__message success';\n                msg.textContent = 'Успешно! Мы скоро свяжемся с вами.';\n                contactForm.reset();\n                btn.textContent = 'Готово';\n            }, 1000);\n        };\n    }\n\n    // --- 6. COOKIES ---\n    const cookie = document.getElementById('cookie-popup');\n    if (cookie && !localStorage.getItem('xenon_cookies')) {\n        setTimeout(() => cookie.classList.add('active'), 3000);\n        document.getElementById('cookie-accept').onclick = () => {\n            localStorage.setItem('xenon_cookies', 'true');\n            cookie.classList.remove('active');\n        };\n    }\n});"],"names":["lenis","time","card","item","contactForm","n1","n2","result","label","e","btn","msg","cookie"],"mappings":"0uBAKA,OAAO,iBAAiB,OAAQ,IAAM,CAElC,OAAO,YAAa,EAGpB,MAAMA,EAAQ,IAAI,MAAM,CACpB,SAAU,IACV,YAAa,GACb,gBAAiB,CACzB,CAAK,EAGDA,EAAM,GAAG,SAAU,cAAc,MAAM,EAEvC,KAAK,OAAO,IAAKC,GAAS,CACtBD,EAAM,IAAIC,EAAO,GAAI,CAC7B,CAAK,EACD,KAAK,OAAO,aAAa,CAAC,EAG1B,KAAK,eAAe,aAAa,GAGV,IAAM,CAGzB,KAAK,KAAK,qBAAsB,CAC5B,EAAG,GACH,QAAS,EACT,SAAU,EACV,QAAS,GACT,KAAM,YAClB,CAAS,EAGgB,SAAS,iBAAiB,WAAW,EAC7C,QAASC,GAAS,CAEvB,KAAK,IAAIA,EAAM,CAAE,UAAW,EAAG,EAAG,GAAI,EAE3B,KAAK,SAAS,CACrB,cAAe,CACX,QAASA,EACT,MAAO,UACP,cAAe,sBAEf,oBAAqB,EACzC,CACA,CAAa,EAEE,GAAGA,EAAM,CACR,UAAW,EACX,EAAG,EACH,SAAU,GACV,KAAM,YACT,CAAA,EACA,KAAKA,EAAK,iBAAiB,cAAc,EAAG,CACzC,EAAG,IACH,QAAS,EACT,QAAS,IACT,SAAU,GACV,KAAM,YACT,EAAE,OAAO,CACtB,CAAS,EAGD,SAAS,iBAAiB,YAAY,EAAE,QAASC,GAAS,CACtD,KAAK,KAAKA,EAAM,CACZ,cAAe,CACX,QAASA,EACT,MAAO,SACV,EACD,EAAG,GACH,QAAS,EACT,SAAU,EAC1B,CAAa,CACb,CAAS,EAGD,KAAK,KAAK,oBAAqB,CAC3B,cAAe,CACX,QAAS,eACT,MAAO,SACV,EACD,MAAO,GACP,QAAS,EACT,SAAU,IACV,KAAM,eAClB,CAAS,CACJ,GAKe,EAIhB,cAAc,QAAS,EAGvB,WAAW,IAAM,CACb,cAAc,QAAS,CAC1B,EAAE,GAAG,EAGN,WAAW,IAAM,CACb,cAAc,QAAS,CAC1B,EAAE,IAAI,EAGP,MAAMC,EAAc,SAAS,eAAe,iBAAiB,EAC7D,GAAIA,EAAa,CACb,MAAMC,EAAK,KAAK,MAAM,KAAK,OAAQ,EAAG,CAAC,EAAI,EACrCC,EAAK,KAAK,MAAM,KAAK,OAAQ,EAAG,CAAC,EAAI,EACrCC,EAASF,EAAKC,EACdE,EAAQ,SAAS,eAAe,eAAe,EACjDA,IAAOA,EAAM,YAAc,iBAAiBH,CAAE,MAAMC,CAAE,KAE1DF,EAAY,SAAYK,GAAM,CAE1B,GADAA,EAAE,eAAgB,EACd,SAAS,SAAS,eAAe,eAAe,EAAE,KAAK,IAAMF,EAAQ,CACrE,MAAM,iBAAiB,EAAG,MAC1C,CACY,MAAMG,EAAMN,EAAY,cAAc,QAAQ,EAC9CM,EAAI,SAAW,GAAMA,EAAI,YAAc,cACvC,WAAW,IAAM,CACb,MAAMC,EAAM,SAAS,eAAe,cAAc,EAClDA,EAAI,MAAM,QAAU,QACpBA,EAAI,UAAY,wBAChBA,EAAI,YAAc,qCAClBP,EAAY,MAAO,EACnBM,EAAI,YAAc,QACrB,EAAE,GAAI,CACV,CACT,CAGI,MAAME,EAAS,SAAS,eAAe,cAAc,EACjDA,GAAU,CAAC,aAAa,QAAQ,eAAe,IAC/C,WAAW,IAAMA,EAAO,UAAU,IAAI,QAAQ,EAAG,GAAI,EACrD,SAAS,eAAe,eAAe,EAAE,QAAU,IAAM,CACrD,aAAa,QAAQ,gBAAiB,MAAM,EAC5CA,EAAO,UAAU,OAAO,QAAQ,CACnC,EAET,CAAC"}